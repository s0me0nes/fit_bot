<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="public, max-age=86400, immutable">
    <meta http-equiv="Pragma" content="public">
    <meta http-equiv="Expires" content="31536000">
    <title>Доставка ПП - Меню</title>
    
    <!-- Preload критических ресурсов для быстрой загрузки -->
    <link rel="preload" href="images/bg.webp" as="image">
    <link rel="preload" href="images/saratov.png" as="image">
    <link rel="preload" href="images/telegram.png" as="image">
    <link rel="preload" href="images/whatsapp.png" as="image">
    <link rel="preload" href="https://www.gifki.org/data/media/1787/kuryer-animatsionnaya-kartinka-0018.gif" as="image">
    <link rel="preload" href="images/sale.png" as="image">
    <link rel="preload" href="images/salebg.jpg" as="image">
    
    <!-- Preconnect для внешних ресурсов -->
    <link rel="preconnect" href="https://telegram.org">
    <link rel="dns-prefetch" href="https://telegram.org">
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            height: 100%;
            background-image: url('/images/bg.webp'), url('/images/bg.jpg'), url('images/bg.webp'), url('images/bg.jpg');
            background-position: center center;
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-color: #f5f5f5;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-image: url('/images/bg.webp'), url('/images/bg.jpg'), url('images/bg.webp'), url('images/bg.jpg');
            background-position: center center;
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-color: transparent;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            transition: background-color 0.4s ease, color 0.4s ease, filter 0.4s ease;
        }

        [data-animate] {
            opacity: 0;
            transform: translateY(25px);
            transition: opacity 0.7s ease, transform 0.7s ease;
        }
        
        [data-animate].visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .header {
            background: url('images/head1.jpg') center center / cover no-repeat;
            color: #1f2933;
            padding: 10px 15px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 20px rgba(0,0,0,0.08);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease, background-image 0.5s ease;
            transform: translateY(0);
            opacity: 1;
        }
        
        .header.hidden {
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            position: relative;
        }
        
        .header-city-center {
            position: absolute;
            left: calc(50% - 80px);
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .header-image-toggle {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(245,245,245,0.85));
            border: 1px solid rgba(0, 0, 0, 0.12);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
            animation: headerTogglePulse 2.4s ease-in-out infinite;
        }
        
        .header-image-toggle:hover {
            background: rgba(255, 255, 255, 0.98);
            transform: scale(1.07);
            box-shadow: 0 6px 16px rgba(0,0,0,0.16);
        }
        
        .header-image-toggle:active {
            transform: scale(0.95);
        }

        @keyframes headerTogglePulse {
            0%, 100% {
                box-shadow: 0 4px 12px rgba(0,0,0,0.12);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 6px 18px rgba(0,0,0,0.18);
                transform: scale(1.05);
            }
        }
        
        .header-text {
            flex: 1;
            min-width: 200px;
            position: relative;
        }
        
        .header h1 {
            font-size: 2em;
            font-weight: 700;
            margin: 0 0 5px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .header .city {
            font-size: 1.5em;
            font-weight: 700;
            margin: 0 0 8px 0;
            color: #1a4728;
            display: flex;
            align-items: center;
            font-family: 'Georgia', 'Times New Roman', serif;
            text-shadow: 
                -1px -1px 0 #fff,
                1px -1px 0 #fff,
                -1px 1px 0 #fff,
                1px 1px 0 #fff,
                0 0 3px rgba(255, 255, 255, 0.8);
            letter-spacing: 0.5px;
        }
        
        .header .subtitle {
            font-size: 0.95em;
            opacity: 0.95;
            margin: 0;
            font-weight: 400;
        }
        
        .header-buttons {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .contact-btn-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .contact-label {
            font-size: 0.65em;
            color: #1a4728;
            text-align: center;
            white-space: nowrap;
            font-weight: 700;
            font-family: 'Georgia', 'Times New Roman', serif;
            text-shadow: 
                -1px -1px 0 #fff,
                1px -1px 0 #fff,
                -1px 1px 0 #fff,
                1px 1px 0 #fff,
                0 0 3px rgba(255, 255, 255, 0.8);
            letter-spacing: 0.3px;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255,255,255,0.15);
            padding: 8px 15px;
            border-radius: 25px;
            margin-right: 10px;
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            overflow: hidden;
        }
        
        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .user-info {
            display: flex;
            flex-direction: column;
        }
        
        .user-name {
            font-size: 0.95em;
            font-weight: 600;
            color: white;
            line-height: 1.2;
        }
        
        .user-status {
            font-size: 0.75em;
            opacity: 0.8;
            color: white;
        }
        
        .contact-btn {
            width: auto;
            height: auto;
            border-radius: 0;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s ease, opacity 0.2s ease;
            text-decoration: none;
            box-shadow: none;
            overflow: visible;
            background: transparent;
            padding: 0;
        }
        
        .contact-btn img {
            width: 40px;
            height: 40px;
            object-fit: contain;
            padding: 0;
        }
        
        .contact-btn:active {
            transform: scale(0.9);
            opacity: 0.8;
        }
        
        .telegram-btn {
            background: transparent;
            position: relative;
        }
        
        .telegram-btn img {
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55), 
                        filter 0.3s ease;
            animation: telegramFloat 3s ease-in-out infinite,
                       telegramPulse 2s ease-in-out infinite;
        }
        
        .telegram-btn:hover img {
            transform: translateY(-8px) scale(1.15) rotate(5deg);
            filter: drop-shadow(0 8px 16px rgba(0, 136, 204, 0.4));
            animation-play-state: paused;
        }
        
        .telegram-btn:active img {
            transform: translateY(-4px) scale(1.05) rotate(2deg);
        }
        
        @keyframes telegramFloat {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            50% {
                transform: translateY(-6px) rotate(2deg);
            }
        }
        
        @keyframes telegramPulse {
            0%, 100% {
                filter: drop-shadow(0 0 0 rgba(0, 136, 204, 0));
            }
            50% {
                filter: drop-shadow(0 0 8px rgba(0, 136, 204, 0.3));
            }
        }
        
        .whatsapp-btn {
            background: transparent;
        }
        
        .whatsapp-btn:hover {
            background: transparent;
            box-shadow: none;
            opacity: 0.8;
        }
        
        .delivery-btn {
            background: transparent;
        }
        
        .delivery-btn:hover {
            background: transparent;
            box-shadow: none;
            opacity: 0.8;
        }
        
        .city img {
            display: inline-block;
        }
        
        @media (max-width: 480px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .header-city-center {
                position: static;
                transform: none;
                width: 100%;
                margin-bottom: 10px;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
            
            .header .city {
                font-size: 1.3em;
            }
            
            .header .subtitle {
                font-size: 0.85em;
            }
            
            .user-profile {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .header-buttons {
                justify-content: center;
            }
            
            .contact-label {
                font-size: 0.6em;
            }
        }
        
        .categories {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px 20px;
            display: flex;
            gap: 10px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .categories::-webkit-scrollbar {
            display: none;
        }
        
        .category-btn {
            padding: 8px 20px;
            background: #f0f0f0;
            border: none;
            border-radius: 20px;
            font-size: 0.9em;
            white-space: nowrap;
            cursor: pointer;
            transition: transform 0.2s ease, background 0.2s ease, color 0.2s ease;
            color: #333;
        }
        
        .category-btn.active {
            background: #4a7c2a;
            color: white;
            box-shadow: 0 8px 18px rgba(74,124,42,0.35);
        }

        .category-btn:hover {
            transform: translateY(-2px);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .product-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            display: flex;
            flex-direction: column;
        }
        
        .product-card:active {
            transform: scale(0.98);
        }
        
        .product-image {
            width: 100%;
            height: 140px;
            background: linear-gradient(135deg, #4a7c2a 0%, #6ba83a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3em;
            position: relative;
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            loading: lazy;
        }
        
        /* Оптимизация загрузки фона */
        .bg-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: -1;
            opacity: 1;
            transition: opacity 0.5s ease;
        }
        
        .bg-loader.loaded {
            opacity: 0;
        }
        
        /* Skeleton loader для карточек */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s ease-in-out infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Анимированный loader */
        .page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2d5016 0%, #4a7c2a 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        
        .page-loader.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .loader-spinner {
            width: 80px;
            height: 80px;
            border: 6px solid rgba(255, 255, 255, 0.2);
            border-top: 6px solid #ffffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loader-text {
            color: white;
            font-size: 1.2em;
            font-weight: 600;
            text-align: center;
            animation: pulse 1.5s ease-in-out infinite;
            margin-bottom: 15px;
        }
        
        .loader-dots::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .loader-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .loader-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ffffff, #e8f5e9);
            border-radius: 2px;
            width: 0%;
            animation: progress 2s ease-in-out infinite;
            transition: width 0.3s ease;
        }
        
        @keyframes progress {
            0% { width: 0%; }
            50% { width: 70%; }
            100% { width: 100%; }
        }
        
        .loader-logo {
            font-size: 3em;
            margin-bottom: 20px;
            animation: bounce 1s ease-in-out infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        body.loading {
            overflow: hidden;
        }
        
        .product-info {
            padding: 12px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-name {
            font-size: 0.95em;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .product-description {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            flex-grow: 1;
        }
        
        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .product-price {
            font-size: 1.1em;
            font-weight: 700;
            color: #4a7c2a;
        }
        
        .add-btn {
            background: #4a7c2a;
            color: white;
            border: none;
            border-radius: 8px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2em;
            transition: background 0.2s;
        }
        
        .add-btn:active {
            background: #3a6a1a;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        
        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }
        
        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
        }
        
        @media (min-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        .info-text {
            background: rgba(255, 255, 255, 0.7);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .info-text:hover {
            transform: translateY(-6px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .info-text h3 {
            color: #2d5016;
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .info-text p {
            color: #666;
            line-height: 1.8;
            font-size: 1em;
        }
        
        .info-section {
            max-width: 1200px;
            margin: 40px auto 20px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        /* Информационное окно о заказах */
        .order-info-box {
            max-width: 1200px;
            margin: 20px auto;
            padding: 12px 14px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.08);
        }

        .order-info-box h3 {
            font-size: 1.2em;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 10px;
            text-align: center;
            letter-spacing: -0.02em;
        }

        .order-info-box p {
            color: #333;
            line-height: 1.6;
            font-size: 0.95em;
            margin-bottom: 6px;
            text-align: center;
        }

        .order-info-box .schedule-example {
            margin-top: 12px;
            padding: 10px;
            background: rgba(0,0,0,0.03);
            border-radius: 10px;
            border-left: 3px solid #4a7c2a;
        }

        .order-info-box .schedule-example .schedule-item {
            display: block;
            margin-bottom: 4px;
            font-size: 0.9em;
            color: #555;
            line-height: 1.5;
        }

        .order-info-box .schedule-example .schedule-item:last-child {
            margin-bottom: 0;
        }

        .order-info-box .schedule-example .schedule-item strong {
            color: #1a1a1a;
            font-weight: 600;
            margin-right: 8px;
        }

        @media (max-width: 640px) {
            .order-info-box {
                margin: 16px auto;
                padding: 12px;
                border-radius: 14px;
            }

            .order-info-box h3 {
                font-size: 1.05em;
            }

            .order-info-box p {
                font-size: 0.85em;
            }

            .order-info-box .schedule-example {
                padding: 10px;
            }

            .order-info-box .schedule-example .schedule-item {
                font-size: 0.8em;
            }

            .order-info-box .schedule-example .schedule-item strong {
                margin-right: 6px;
            }
        }

        /* План питания */
        .plan-preview {
            max-width: 1200px;
            margin: 20px auto 10px auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 24px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.08);
            border: 1px solid rgba(76,175,80,0.12);
        }

        .plan-header {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            gap: 8px;
        }
        
        .plan-header h2 {
            margin: 0;
            font-size: 1.6em;
            color: #2d5016;
            text-align: center;
        }

        .plan-promo {
            font-size: 1.1em;
            color: #f43f5e; /* насыщенный красный */
            font-weight: 700;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.35);
            letter-spacing: 0.03em;
            font-family: 'Playfair Display', 'Cormorant Garamond', 'Georgia', serif;
            animation: promoPulse 2s infinite ease-in-out;
        }

        @keyframes promoPulse {
            0%, 100% {
                transform: translateY(0);
                opacity: 1;
            }
            50% {
                transform: translateY(-2px);
                opacity: 0.9;
            }
        }

        .plan-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .plan-control {
            border: 1px solid rgba(76,175,80,0.3);
            background: white;
            border-radius: 999px;
            padding: 10px 20px;
            font-size: 0.95em;
            color: #2d5016;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .plan-control:hover {
            border-color: #4caf50;
            box-shadow: 0 4px 12px rgba(76,175,80,0.2);
        }

        .plan-control .icon {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            background: #4caf50;
            display: inline-block;
            position: relative;
        }

        .plan-control .icon::before,
        .plan-control .icon::after {
            content: "";
            position: absolute;
            background: white;
            top: 7px;
            left: 3px;
            right: 3px;
            height: 2px;
        }

        .plan-days {
            display: flex;
            flex-wrap: wrap;
            gap: 18px;
            margin-bottom: 25px;
            font-weight: 500;
            justify-content: center;
        }

        .plan-day {
            color: #2d5016;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 1.1em;
            padding: 8px 20px;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(45, 80, 22, 0.2);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .plan-day.active {
            color: white;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border: 2px solid #22c55e;
            border-radius: 25px;
            padding: 8px 20px;
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.5), 0 4px 12px rgba(34, 197, 94, 0.3);
            transform: translateY(-2px);
            font-weight: 700;
        }

        .plan-day:hover:not(.active) {
            transform: translateY(-3px);
            color: #2d5016;
            background: rgba(255, 255, 255, 1);
            border-color: rgba(45, 80, 22, 0.4);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
        }
        
        .plan-day.active:hover {
            transform: translateY(-2px);
            color: white;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border: 2px solid #22c55e;
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.5), 0 4px 12px rgba(34, 197, 94, 0.3);
        }

        .plan-day:active {
            transform: scale(0.98) translateY(-1px);
        }
        
        /* Скрываем день 12.01 (понедельник) */
        .plan-day[data-day="0"] {
            display: none;
        }

        /* Блок с ценами */
        .plan-price-block {
            display: none;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .plan-price-block.active {
            display: none;
        }

        .plan-price-label {
            font-size: 1em;
            color: #1f2933;
            margin-right: 10px;
            font-weight: 600;
        }

        .plan-price {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3em;
            font-weight: 700;
        }

        .plan-price-old {
            color: #dc2626;
            text-decoration: line-through;
            font-size: 0.9em;
            opacity: 0.8;
        }

        .plan-price-new {
            color: #22c55e;
            font-weight: 900;
            font-size: 1.2em;
        }

        @media (max-width: 640px) {
            .plan-price-label {
                font-size: 0.9em;
            }
            
            .plan-price {
                font-size: 1.1em;
            }
            
            .plan-price-old {
                font-size: 0.85em;
            }
            
            .plan-price-new {
                font-size: 1.1em;
            }
        }

        .plan-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            align-items: start;
        }
        
        @media (max-width: 768px) {
            .plan-cards {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .plan-cards {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
        }

        .plan-card {
            background: #ffffff;
            border-radius: 16px;
            padding: 12px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            border: 1px solid rgba(0,0,0,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .plan-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.15);
        }

        .plan-card:active {
            transform: scale(0.98);
        }

        .plan-card-image-wrapper {
            position: relative;
            width: 100%;
            margin-bottom: 8px;
            aspect-ratio: 1 / 1;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .card-note {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(34, 197, 94, 0.9);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
            white-space: nowrap;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .plan-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            display: block;
            transition: opacity 0.3s ease;
        }
        
        /* Для перекусов - изображение по центру по высоте */
        .plan-card.meal-perekus {
            display: flex;
            flex-direction: column;
        }
        
        .plan-card.meal-perekus .plan-card-image-wrapper {
            flex: 0 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 4px;
            min-height: auto;
            aspect-ratio: 1 / 1;
        }
        
        .plan-card.meal-perekus .plan-card-image-wrapper img {
            object-fit: contain;
            object-position: center;
            border-radius: 50%;
            width: 90%;
            height: 90%;
            max-width: 90%;
            max-height: 90%;
            padding: 0;
        }
        
        /* Для ужина - такой же размер как у завтрака */
        .plan-card.meal-uzhin .plan-card-image-wrapper img {
            object-fit: cover;
            border-radius: 50%;
            width: 100%;
            height: 100%;
            padding: 0;
        }
        
        /* Увеличение изображения pit3.png для карточки */
        .plan-card[data-image*="pit3.png"] .plan-card-image-wrapper {
            aspect-ratio: 1 / 1;
            margin-bottom: 4px;
        }
        
        .plan-card[data-image*="pit3.png"] .plan-card-image-wrapper img {
            object-fit: cover;
            border-radius: 50%;
            width: 100%;
            height: 100%;
            padding: 0;
            max-width: 100%;
            max-height: 100%;
        }
        
        .plan-card-ingredients {
            background: #ffffff;
            backdrop-filter: blur(10px);
            padding: 4px 12px;
            border-radius: 12px;
            margin-top: auto;
            max-height: 40px;
            overflow-y: hidden;
        }
        
        .plan-card-ingredients.expanded {
            max-height: none;
            overflow-y: visible;
        }
        
        .plan-card-ingredients-title {
            font-size: 0.75em;
            font-weight: 700;
            color: #2d5016;
            margin-bottom: 0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            line-height: 1.2;
            cursor: pointer;
            user-select: none;
            animation: bounceUp 2s ease-in-out infinite;
            transition: transform 0.2s ease;
            padding: 4px 12px;
            min-height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: -4px -12px 0 -12px;
            position: relative;
            top: 2px;
        }
        
        .plan-card-ingredients-title:hover {
            transform: translateY(-2px);
        }
        
        .plan-card-ingredients-title:active {
            transform: translateY(0);
        }
        
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }
        
        @keyframes bounceUp {
            0%, 100% {
                transform: translateY(2px);
            }
            50% {
                transform: translateY(-2px);
            }
        }
        
        .plan-card-ingredients-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1), padding 0.4s ease, margin 0.4s ease, opacity 0.3s ease;
            padding: 0;
            margin: 0;
            opacity: 0;
        }
        
        .plan-card-ingredients-content.expanded {
            padding-top: 8px;
            margin-top: 0;
            overflow: visible;
            opacity: 1;
        }
        
        .plan-card-ingredients-list {
            list-style: none;
            padding: 0;
            margin: 0;
            font-size: 0.7em;
            color: #555;
            line-height: 1.4;
        }
        
        .plan-card-ingredients-list li {
            margin-bottom: 3px;
            padding-left: 12px;
            position: relative;
        }
        
        .plan-card-ingredients-list li::before {
            content: "•";
            position: absolute;
            left: 0;
            color: #4a7c2a;
            font-weight: bold;
        }
        
        .plan-card-ingredients-section {
            margin-bottom: 6px;
        }
        
        .plan-card-ingredients-section-title {
            font-size: 0.75em;
            font-weight: 600;
            color: #4a7c2a;
            margin-bottom: 4px;
            margin-top: 6px;
        }
        
        .plan-card-content {
            padding: 0 4px;
            display: flex;
            flex-direction: column;
            flex: 1;
            justify-content: flex-start;
        }

        .plan-card small {
            color: #999;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.75em;
            display: block;
            margin-bottom: 4px;
            transition: opacity 0.3s ease;
            min-height: 1.2em;
            line-height: 1.2em;
            height: 1.2em;
            margin-top: 0;
        }
        
        /* Выравнивание названий: Завтрак и Перекусы на одном уровне */
        .plan-card.meal-zavtrak small,
        .plan-card.meal-perekus small {
            height: 1.2em;
            margin-bottom: 4px;
            margin-top: 0;
        }
        
        /* Выравнивание названий: Обед и Ужин на одном уровне */
        .plan-card.meal-obed small,
        .plan-card.meal-uzhin small {
            height: 1.2em;
            margin-bottom: 4px;
            margin-top: 0;
        }

        .plan-card h4 {
            margin: 4px 0 2px 0;
            font-size: 0.95em;
            color: #1f2933;
            line-height: 1.3;
            font-family: 'Georgia', 'Times New Roman', serif;
            font-weight: 600;
            letter-spacing: 0.3px;
            transition: opacity 0.3s ease;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            min-height: 2.6em;
        }
        
        /* Уменьшаем отступ между названием и составом у завтраков */
        .plan-card.meal-zavtrak .plan-card-ingredients {
            margin-top: 4px;
            margin-bottom: 0;
        }
        
        /* Убираем лишнее пустое пространство под составом у завтраков */
        .plan-card.meal-zavtrak .plan-card-content {
            justify-content: flex-start;
        }
        
        /* Для перекусов - текст закреплен внизу карточки */
        .plan-card.meal-perekus .plan-card-content {
            justify-content: flex-start;
            margin-top: 0;
            padding-top: 0;
        }
        
        .plan-card.meal-perekus small {
            height: 1.2em;
            margin-bottom: 4px;
            margin-top: 0;
        }
        
        .plan-card.meal-perekus h4 {
            min-height: 2.6em;
            margin: 4px 0 2px 0;
        }
        
        /* Для ужина - выравнивание названий на одном уровне с обедом */
        .plan-card.meal-uzhin .plan-card-content {
            justify-content: flex-start;
        }
        
        .plan-card.meal-uzhin small {
            height: 1.2em;
            margin-bottom: 4px;
        }
        
        .plan-card.meal-uzhin h4 {
            min-height: 2.6em;
            margin: 4px 0 2px 0;
        }

        .plan-card span {
            color: #94a3b8;
            font-size: 0.8em;
        }
        
        /* Модальное окно для увеличенного фото */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            transform: scale(0.7);
            transition: transform 0.3s ease;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .modal-overlay.active .modal-content {
            transform: scale(1);
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            background: rgba(0,0,0,0.5);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            transition: background 0.2s, transform 0.2s;
        }
        
        .modal-close:hover {
            background: rgba(0,0,0,0.7);
            transform: rotate(90deg);
        }
        
        .modal-image {
            width: 80%;
            max-width: 400px;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            border-radius: 50%;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        @media (max-width: 768px) {
            .modal-image {
                width: 70%;
                max-width: 300px;
            }
        }
        
        @media (max-width: 480px) {
            .modal-image {
                width: 60%;
                max-width: 250px;
            }
        }
        
        .modal-ingredients {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .modal-ingredients-title {
            font-size: 0.85em;
            font-weight: 700;
            color: #2d5016;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .modal-ingredients-list {
            list-style: none;
            padding: 0;
            margin: 0;
            font-size: 0.85em;
            color: #555;
            line-height: 1.6;
        }
        
        .modal-ingredients-list li {
            margin-bottom: 5px;
            padding-left: 16px;
            position: relative;
        }
        
        .modal-ingredients-list li::before {
            content: "•";
            position: absolute;
            left: 0;
            color: #4a7c2a;
            font-weight: bold;
        }
        
        .modal-ingredients-section {
            margin-bottom: 10px;
        }
        
        .modal-ingredients-section-title {
            font-size: 0.85em;
            font-weight: 600;
            color: #4a7c2a;
            margin-bottom: 6px;
            margin-top: 10px;
        }
        
        .modal-info {
            text-align: center;
            width: 100%;
        }
        
        .modal-info small {
            display: block;
            color: #999;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .modal-info h3 {
            font-size: 1.5em;
            color: #2d5016;
            margin: 10px 0;
            font-weight: 600;
        }
        
        .modal-info .modal-calories {
            color: #94a3b8;
            font-size: 1em;
            margin-bottom: 15px;
        }
        
        .modal-info .modal-description {
            color: #666;
            font-size: 1em;
            line-height: 1.6;
            max-width: 500px;
            margin: 0 auto;
        }

        /* Модальное окно со скидкой */
        .sale-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .sale-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .sale-modal-content {
            background: url('images/salebg.jpg') center center / cover no-repeat;
            background-color: #ffffff;
            border-radius: 30px;
            padding: 40px 30px;
            max-width: 90%;
            width: 450px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            transform: scale(0.5) translateY(50px);
            opacity: 0;
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.6s ease;
            overflow: hidden;
        }
        
        .sale-modal-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.85);
            z-index: 0;
            border-radius: 30px;
        }
        
        .sale-modal-content > * {
            position: relative;
            z-index: 1;
        }

        .sale-modal-overlay.show .sale-modal-content {
            transform: scale(1) translateY(0);
            opacity: 1;
            animation: saleBounce 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s;
        }

        @keyframes saleBounce {
            0% {
                transform: scale(1) translateY(0);
            }
            50% {
                transform: scale(1.05) translateY(-10px);
            }
            100% {
                transform: scale(1) translateY(0);
            }
        }

        .sale-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.1);
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 24px;
            color: #666;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            line-height: 1;
        }

        .sale-modal-close:hover {
            background: rgba(0, 0, 0, 0.2);
            transform: rotate(90deg);
        }

        .sale-image-wrapper {
            margin-bottom: 25px;
            position: relative;
            animation: saleImagePulse 2s ease-in-out infinite;
        }

        @keyframes saleImagePulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .sale-image-wrapper img {
            max-width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .sale-title {
            font-size: 2em;
            font-weight: 800;
            color: #1a4728;
            margin-bottom: 15px;
            text-shadow: 0 2px 6px rgba(0, 0, 0, 0.2), 0 0 10px rgba(255, 255, 255, 0.8);
            animation: saleTitleGlow 2s ease-in-out infinite;
        }

        @keyframes saleTitleGlow {
            0%, 100% {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            50% {
                text-shadow: 0 2px 10px rgba(45, 80, 22, 0.3), 0 0 20px rgba(45, 80, 22, 0.2);
            }
        }

        .sale-discount {
            font-size: 3.5em;
            font-weight: 900;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 15px 0;
            line-height: 1;
            animation: saleDiscountShake 0.5s ease-in-out 0.8s;
        }

        @keyframes saleDiscountShake {
            0%, 100% {
                transform: rotate(0deg);
            }
            25% {
                transform: rotate(-5deg) scale(1.1);
            }
            75% {
                transform: rotate(5deg) scale(1.1);
            }
        }

        .sale-text {
            font-size: 1.2em;
            color: #1f2933;
            margin-bottom: 20px;
            line-height: 1.6;
            font-weight: 600;
            text-shadow: 0 1px 3px rgba(255, 255, 255, 0.9);
        }

        .sale-highlight {
            font-size: 1.1em;
            font-weight: 700;
            color: #1a4728;
            background: rgba(76, 175, 80, 0.25);
            padding: 12px 20px;
            border-radius: 15px;
            margin: 20px 0;
            display: inline-block;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(45, 80, 22, 0.3);
        }

        .sale-button {
            background: linear-gradient(135deg, #4a7c2a 0%, #2d5016 100%);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 8px 20px rgba(45, 80, 22, 0.3);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .sale-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(45, 80, 22, 0.4);
        }

        .sale-button:active {
            transform: translateY(-1px);
        }

        @media (max-width: 640px) {
            .sale-modal-content {
                padding: 30px 20px;
                width: 95%;
            }

            .sale-title {
                font-size: 1.5em;
            }

            .sale-discount {
                font-size: 2.5em;
            }

            .sale-text {
                font-size: 1em;
            }
        }

        /* Секция преимуществ */
        .highlights-section {
            max-width: 1200px;
            margin: 40px auto 60px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .highlight-card {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.12);
            border: 1px solid rgba(76, 175, 80, 0.15);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .highlight-card::after {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at top right, rgba(76, 175, 80, 0.15), transparent 45%);
            pointer-events: none;
        }

        .highlight-card h3 {
            color: #2d5016;
            font-size: 1.3em;
            margin-bottom: 12px;
        }

        .highlight-card p {
            color: #555;
            line-height: 1.7;
        }

        .highlight-card .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 999px;
            font-size: 0.85em;
            font-weight: 600;
            color: #2d5016;
            background: rgba(76, 175, 80, 0.15);
            margin-bottom: 12px;
        }

        .highlight-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.18);
        }

        /* Отзывы клиентов */
        .reviews-section {
            max-width: 1200px;
            margin: 40px auto 60px auto;
            padding: 0 20px;
        }
        
        .in-development {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 60px 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .in-development-text {
            font-size: 2em;
            font-weight: 700;
            color: #2d5016;
            animation: pulse 2s ease-in-out infinite;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.7;
                transform: scale(1.05);
            }
        }
        
        @media (max-width: 640px) {
            .in-development {
                padding: 40px 20px;
            }
            
            .in-development-text {
                font-size: 1.5em;
            }
        }

        .reviews-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            gap: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 18px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
        }
        
        .reviews-header > span {
            font-size: 1.3em;
            color: #2d5016;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            flex: 0 0 auto;
        }
        
        .reviews-header .review-controls {
            flex: 1;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .reviews-header h3 {
            font-size: 1.3em;
            color: #2d5016;
            font-weight: 700;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .reviews-header .badge {
            display: block;
            color: #2d5016;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .review-controls {
            display: flex;
            gap: 10px;
        }

        .review-nav {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid #4a7c2a;
            background: #4a7c2a;
            color: white;
            font-size: 1.5em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 12px rgba(74, 124, 42, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .review-nav:hover {
            transform: translateY(-3px) scale(1.05);
            background: #3a6a1a;
            box-shadow: 0 6px 20px rgba(74, 124, 42, 0.6);
        }
        
        .review-nav:active {
            transform: translateY(-1px) scale(1);
        }

        .review-card {
            background: rgba(255, 255, 255, 0.75);
            border-radius: 18px;
            padding: 14px 18px;
            box-shadow: 0 20px 45px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0,0,0,0.05);
            min-height: 90px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .review-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 30px 55px rgba(0, 0, 0, 0.12);
        }

        .review-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }

        .review-user {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .review-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid rgba(76, 175, 80, 0.35);
        }

        .review-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            loading: lazy;
        }

        .review-meta h4 {
            margin: 0;
            font-size: 0.95em;
            color: #1f2933;
        }

        .review-meta span {
            font-size: 0.75em;
            color: #7a8a9d;
        }

        .review-stars {
            color: #facc15;
            font-size: 0.9em;
        }
        
        .review-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .review-text {
            font-size: 0.85em;
            color: #1f2933;
            line-height: 1.5;
        }

        .review-thumbnails {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .review-thumbnail {
            flex: 1;
            min-width: 120px;
            background: rgba(255,255,255,0.65);
            border: 1px solid transparent;
            border-radius: 16px;
            padding: 12px 14px;
            cursor: pointer;
            transition: border 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            text-align: left;
        }

        .review-thumbnail.active {
            border-color: rgba(34, 197, 94, 0.6);
            box-shadow: 0 12px 25px rgba(34,197,94,0.2);
            transform: translateY(-2px);
        }

        .review-thumbnail strong {
            display: block;
            font-size: 0.9em;
            color: #1f2933;
        }

        .review-thumbnail span {
            font-size: 0.8em;
            color: #7a8a9d;
        }

        @media (max-width: 640px) {
            .review-controls {
                width: 100%;
                justify-content: flex-start;
            }

            .review-card {
                padding: 20px;
            }

            .review-top {
                flex-direction: column;
                align-items: flex-start;
            }

            .review-thumbnail {
                flex: 1 1 45%;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Анимированная подсказка для прокрутки вниз */
        .scroll-hint {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            pointer-events: none;
        }
        
        .scroll-hint.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .scroll-hint-text {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.85em;
            font-weight: 500;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            background: rgba(45, 80, 22, 0.8);
            padding: 6px 12px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .scroll-hint-arrow {
            width: 30px;
            height: 30px;
            border-right: 3px solid rgba(255, 255, 255, 0.9);
            border-bottom: 3px solid rgba(255, 255, 255, 0.9);
            transform: rotate(45deg);
            animation: scrollBounce 2s ease-in-out infinite;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        @keyframes scrollBounce {
            0%, 100% {
                transform: rotate(45deg) translateY(0);
                opacity: 0.7;
            }
            50% {
                transform: rotate(45deg) translateY(10px);
                opacity: 1;
            }
        }
        
        /* Убираем пустоту внизу */
        body {
            padding-bottom: 0;
            margin-bottom: 0;
        }
        
        .reviews-section {
            margin-bottom: 60px;
            padding-bottom: 40px;
        }
        
        /* Изображение результата */
        .result-image-section {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
            text-align: center;
        }
        
        .result-image-section img {
            max-width: 100%;
            width: 100%;
            height: auto;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            display: block;
            margin: 0 auto;
            object-fit: contain;
        }
        
        /* FAQ секция */
        .faq-section {
            max-width: 1200px;
            margin: 20px auto 60px auto;
            padding: 0 20px;
        }
        
        .faq-header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 18px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
        }
        
        .faq-header h2 {
            font-size: 1.3em;
            color: #2d5016;
            margin: 0;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .faq-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .faq-category-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(76, 175, 80, 0.3);
            border-radius: 25px;
            color: #2d5016;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .faq-category-btn .icon {
            font-size: 1.1em;
        }
        
        .faq-category-btn:hover,
        .faq-category-btn.active {
            background: linear-gradient(135deg, #4a7c2a 0%, #3a6a1a 100%);
            color: white;
            border-color: #4a7c2a;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }
        
        .faq-category {
            display: none;
        }
        
        .faq-category.active {
            display: block;
            animation: fadeInUp 0.4s ease;
        }
        
        .faq-item {
            background: rgba(255, 255, 255, 0.85);
            border-radius: 16px;
            margin-bottom: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(76, 175, 80, 0.15);
            transition: box-shadow 0.3s ease;
        }
        
        .faq-item:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
        }
        
        .faq-question {
            padding: 18px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: #2d5016;
            font-size: 1.05em;
            transition: background 0.3s ease;
        }
        
        .faq-question:hover {
            background: rgba(76, 175, 80, 0.05);
        }
        
        .faq-question.active {
            background: rgba(76, 175, 80, 0.1);
        }
        
        .faq-icon {
            font-size: 1.2em;
            transition: transform 0.3s ease;
            color: #4a7c2a;
        }
        
        .faq-question.active .faq-icon {
            transform: rotate(180deg);
        }
        
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.4s ease;
            padding: 0 20px;
        }
        
        .faq-answer.active {
            max-height: 500px;
            padding: 0 20px 18px 20px;
        }
        
        .faq-answer-content {
            color: #555;
            line-height: 1.7;
            font-size: 0.95em;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        html {
            padding-bottom: 0;
            margin-bottom: 0;
        }
        
        /* Убираем лишние отступы в конце страницы */
        section:last-of-type {
            margin-bottom: 60px;
        }
    </style>
</head>
<body class="loading">
    <!-- Анимированный loader -->
    <div class="page-loader" id="pageLoader">
        <div class="loader-logo">🍽️</div>
        <div class="loader-spinner"></div>
        <div class="loader-text">
            Загрузка меню<span class="loader-dots"></span>
        </div>
        <div class="loader-progress">
            <div class="loader-progress-bar" id="progressBar"></div>
        </div>
    </div>
    
    <!-- Загрузчик фона для плавной загрузки -->
    <div class="bg-loader" id="bgLoader"></div>
    <div class="header">
        <div class="header-content">
            <div class="header-city-center">
                <div class="city">
                    <img src="images/saratov.png" alt="Саратов" style="width: 20px; height: 20px; vertical-align: middle; margin-right: 5px;" loading="eager">
                    Саратов
                </div>
                <button class="header-image-toggle" id="headerImageToggle" title="Сменить фон шапки">🖼️</button>
            </div>
            <div class="header-buttons">
                <div class="user-profile" id="userProfile" style="display: none;">
                    <div class="user-avatar" id="userAvatar">
                        👤
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="userName">Пользователь</div>
                        <div class="user-status">Авторизован</div>
                    </div>
                </div>
                <div class="contact-btn-wrapper">
                    <a href="https://t.me/MariaZeynalova" target="_blank" class="contact-btn telegram-btn" title="Написать в Telegram">
                        <img src="images/telegram.png" alt="Telegram" style="width: 40px; height: 40px;" loading="eager">
                    </a>
                    <span class="contact-label">Для заказа</span>
                </div>
                <div class="contact-btn-wrapper">
                    <a href="https://t.me/Nill_Kafri" target="_blank" class="contact-btn delivery-btn" title="Связь с курьером">
                        <img src="https://www.gifki.org/data/media/1787/kuryer-animatsionnaya-kartinka-0018.gif" alt="Курьер" style="width: 40px; height: 40px;" loading="eager">
                    </a>
                    <span class="contact-label">Связь с курьером</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Информационное окно о заказах -->
    <div class="order-info-box" data-animate>
        <h3>Мы принимаем заказы за 2 дня</h3>
        <p>Это необходимо для подготовки свежих блюд.</p>
        <div class="schedule-example">
            <p style="margin-bottom: 12px; font-weight: 600; color: #1a1a1a;">Пример графика:</p>
            <div class="schedule-item">
                <strong>6-е число:</strong>
                <span>оформление заказа</span>
            </div>
            <div class="schedule-item">
                <strong>7-е число:</strong>
                <span>доставка рациона</span>
            </div>
            <div class="schedule-item">
                <strong>8-е число:</strong>
                <span>день приема пищи</span>
            </div>
        </div>
    </div>
    
    <!-- Превью меню -->
    <section class="plan-preview" data-animate id="planPreview">
        <div class="plan-header">
            <div class="plan-promo">Закажи сейчас и получи 40% скидку на 4 дня</div>
            <h2>Расписание</h2>
        </div>
        <div class="plan-days">
            <span class="plan-day" data-day="0">Пн 12.01</span>
            <span class="plan-day active" data-day="1">Вт 13.01</span>
            <span class="plan-day" data-day="2">Ср 14.01</span>
            <span class="plan-day" data-day="3">Чт 15.01</span>
            <span class="plan-day" data-day="4">Пт 16.01</span>
            <span class="plan-day" data-day="5">Сб 17.01</span>
            <span class="plan-day" data-day="6">Вс 18.01</span>
        </div>
        <div class="plan-price-block active" id="planPriceBlock" data-day="1">
            <div class="plan-price">
                <span class="plan-price-label">За весь день</span>
                <span class="plan-price-old">2250₽</span>
                <span class="plan-price-new">1650₽</span>
            </div>
        </div>
        <div class="plan-cards" id="planCards">
            <!-- Карточки будут сгенерированы через JavaScript -->
        </div>
    </section>


    <!-- Отзывы клиентов -->
    <section class="reviews-section" data-animate>
        <div class="in-development">
            <div class="in-development-text">Отзывы<br>В разработке</div>
        </div>
    </section>

    <!-- FAQ секция -->
    <section class="faq-section" data-animate>
        <div class="faq-header">
            <h2>Часто задаваемые вопросы</h2>
        </div>
        
        <div class="faq-categories">
            <button class="faq-category-btn active" data-category="general">
                <span class="icon">💬</span>
                <span>Общие</span>
            </button>
            <button class="faq-category-btn" data-category="storage">
                <span class="icon">❄️</span>
                <span>Хранение</span>
            </button>
            <button class="faq-category-btn" data-category="payment">
                <span class="icon">💳</span>
                <span>Оплата и Доставка</span>
            </button>
            <button class="faq-category-btn" data-category="products">
                <span class="icon">🥗</span>
                <span>Продукты</span>
            </button>
        </div>
        
        <!-- Общие вопросы -->
        <div class="faq-category active" id="faq-general">
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Можно ли менять местами блюда в течение дня?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Утром количество углеводов является максимальным, а вечером минимальным. Поэтому мы не рекомендуем менять местами приемы в течение дня.
                    </div>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Насколько часто у меня будет меняться меню?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Мы за разнообразие. В нашем меню более 400 блюд и мы постоянно обновляем его с учетом ваших пожеланий и отзывов.
                    </div>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Сколько времени я сэкономлю?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Мы все посчитали: на составление рациона, походы в магазин и приготовление еды уходит около 20 часов в неделю. Теперь это время будет только вашим.
                    </div>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Нужно ли есть еще что-то дополнительно?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Наше меню на день идеально сбалансировано, поэтому вам не нужно покупать дополнительные продукты и что-то готовить.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Хранение -->
        <div class="faq-category" id="faq-storage">
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Как долго хранятся ваши блюда?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Наши блюда упакованы в герметичные контейнеры по технологии газомодифицированной среды. Это сохраняет свежесть на несколько дней, если хранить в холодильнике. Главное — следите за сроками годности на упаковке.
                    </div>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Можно ли разогревать еду прямо в контейнере?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Да. Просто снимите пленку/крышку и поставьте контейнер в микроволновку на пару минут.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Оплата и Доставка -->
        <div class="faq-category" id="faq-payment">
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Как я могу оплатить свой заказ?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Удобным вам способом: наличными курьеру в день первой доставки либо переводом.
                    </div>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Как осуществляется доставка?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Мы привозим еду каждые 2 дня. Дополнительная информация по телеграму.
                    </div>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Когда можно изменить время доставки, перенести доставку или отменить?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Свяжитесь с курьером: в приложении есть кнопка «Написать курьеру». Он постарается подстроиться под ваш новый график.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Продукты -->
        <div class="faq-category" id="faq-products">
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Какие продукты вы используете?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        Мы используем диетические сорта мяса, например куриное филе, филе индейки и говядину. Молочная продукция оптимальна по жирности — до 5%. Многие блюда готовим на пару и по технологии су-вид. Так они получаются вкусными и полезными.
                    </div>
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFaq(this)">
                    <span>Используете ли вы сахарозаменитель?</span>
                    <span class="faq-icon">▼</span>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-content">
                        В нашем меню есть блюда, где сахар заменен на натуральный сахарозаменитель "Prebiosweet Fitness", чтобы еда была не только вкусной, но и полезной. Подробный состав вы всегда можете уточнить у нашего менеджера.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Блок с преимуществами -->
    <section class="highlights-section" data-animate>
        <div class="highlight-card" data-animate>
            <span class="badge">Сбалансированные рационы</span>
            <h3>Продуманные меню на каждый день</h3>
            <p>Мы готовим дома и продумываем каждую порцию: идеальное соотношение белков, жиров и углеводов, только свежие ингредиенты и честные порции.</p>
        </div>
        <div class="highlight-card" data-animate>
            <span class="badge">10 лет опыта</span>
            <h3>Готовим как для себя</h3>
            <p>У нас более 10 лет домашнего опыта: мы готовили для себя и семьи, а теперь делимся этим с вами. Никакого ресторанного пафоса — только забота и польза.</p>
        </div>
        <div class="highlight-card" data-animate>
            <span class="badge">Разнообразие вкусов</span>
            <h3>Домашняя еда, которая вдохновляет</h3>
            <p>Меняем меню каждую неделю, используем только свежие продукты и готовим без полуфабрикатов. Всегда вкусно, по-домашнему и без компромиссов по качеству.</p>
        </div>
    </section>

    <!-- Информационные тексты -->
    <section class="info-section" data-animate>
        <div class="info-text" data-animate>
            <h3>🌱 Польза правильного питания</h3>
            <p>Правильное питание — это основа здоровья и энергии. Домашние блюда помогают поддерживать баланс витаминов и минералов, необходимых для активной жизни.</p>
            <p>Свежие продукты без лишних добавок укрепляют иммунитет и улучшают самочувствие каждый день.</p>
        </div>
        <div class="info-text" data-animate>
            <h3>🚚 Доставка и качество</h3>
            <p>Мы предлагаем быструю и надежную доставку свежих продуктов прямо к вашему дому. Все блюда готовятся из домашней продукции высочайшего качества.</p>
            <p>Наша продукция выращивается с заботой и вниманием к деталям, без использования вредных добавок. Только натуральные ингредиенты для вашего здоровья.</p>
        </div>
    </section>
    
    <!-- Анимированная подсказка для прокрутки вниз -->
    <div class="scroll-hint" id="scrollHint">
        <div class="scroll-hint-text">Прокрутите вниз</div>
        <div class="scroll-hint-arrow"></div>
    </div>
    
    <!-- Модальное окно для увеличенного фото -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <img class="modal-image" id="modalImage" src="" alt="">
            <div class="modal-ingredients" id="modalIngredients"></div>
            <div class="modal-info">
                <small id="modalMeal"></small>
                <h3 id="modalName"></h3>
                <div class="modal-calories" id="modalCalories"></div>
                <div class="modal-description" id="modalDescription"></div>
            </div>
        </div>
    </div>

    <!-- Модальное окно со скидкой при первом запуске -->
    <div class="sale-modal-overlay" id="saleModalOverlay">
        <div class="sale-modal-content">
            <div class="sale-image-wrapper">
                <img src="images/sale.png" alt="Скидка">
            </div>
            <h2 class="sale-title">Специальное предложение!</h2>
            <p class="sale-text">
                Закажите прямо сейчас и получите<br>
                <span class="sale-highlight">скидку 40% на первые 4 дня</span>
            </p>
            <p class="sale-text" style="font-size: 0.95em; color: #2d3748; margin-top: 10px; font-weight: 500;">
                Начните свой путь к здоровому питанию<br>
                с выгодным предложением!
            </p>
            <button class="sale-button" id="saleOrderButton" onclick="hideSaleModal(); setTimeout(() => { document.getElementById('planPreview')?.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 300);">
                Сделать заказ
            </button>
        </div>
    </div>

    <script>
        // Управление loader'ом
        const pageLoader = document.getElementById('pageLoader');
        const body = document.body;
        
        // Функция для скрытия loader'а
        function hideLoader() {
            if (pageLoader) {
                pageLoader.classList.add('hidden');
                body.classList.remove('loading');
                // Удаляем loader из DOM после анимации
                setTimeout(() => {
                    if (pageLoader.parentNode) {
                        pageLoader.remove();
                    }
                }, 500);
            }
        }

        // Управление модальным окном со скидкой
        const saleModalOverlay = document.getElementById('saleModalOverlay');
        
        // Функция для показа модального окна со скидкой
        function showSaleModal() {
            if (!saleModalOverlay) return;
            
            // Проверяем, показывали ли уже модальное окно сегодня
            const lastShown = localStorage.getItem('saleModalLastShown');
            const now = new Date().getTime();
            const oneDay = 24 * 60 * 60 * 1000; // 24 часа в миллисекундах
            
            // Если показывали менее суток назад - не показываем
            if (lastShown && (now - parseInt(lastShown)) < oneDay) {
                return;
            }
            
            // Показываем модальное окно через небольшую задержку после загрузки
            setTimeout(() => {
                saleModalOverlay.classList.add('show');
                // Сохраняем время показа
                localStorage.setItem('saleModalLastShown', now.toString());
            }, 1200); // Показываем через 1.2 секунды после загрузки
        }
        
        // Функция для скрытия модального окна
        function hideSaleModal() {
            if (saleModalOverlay) {
                saleModalOverlay.classList.remove('show');
            }
        }
        
        // Закрытие модального окна при клике на overlay (но не на сам контент)
        if (saleModalOverlay) {
            saleModalOverlay.addEventListener('click', (e) => {
                if (e.target === saleModalOverlay) {
                    hideSaleModal();
                }
            });
        }

        // Скрываем loader когда все загрузилось
        window.addEventListener('load', () => {
            // Ждем немного, чтобы показать loader хотя бы минимальное время
            setTimeout(() => {
                hideLoader();
                
                // Скрываем загрузчик фона
                const bgLoader = document.getElementById('bgLoader');
                if (bgLoader) {
                    setTimeout(() => {
                        bgLoader.classList.add('loaded');
                        setTimeout(() => bgLoader.remove(), 500);
                    }, 300);
                }
                
                // Показываем модальное окно со скидкой при первом запуске
                showSaleModal();
            }, 800); // Минимум 800ms для плавности
        });
        
        // Если страница уже загружена (из кеша), скрываем loader сразу
        if (document.readyState === 'complete') {
            setTimeout(() => {
                hideLoader();
                showSaleModal();
            }, 300);
        }
        
        // Предзагрузка критических изображений
        const criticalImages = [
            'images/bg.webp',
            'images/saratov.png',
            'images/telegram.png',
            'images/whatsapp.png'
            // Внешний GIF загружается асинхронно, не блокирует загрузку
        ];
        
        let imagesLoaded = 0;
        const totalImages = criticalImages.length;
        
        // Загружаем изображения и отслеживаем прогресс
        const progressBar = document.getElementById('progressBar');
        const loaderText = document.querySelector('.loader-text');
        
        function updateProgress(percent) {
            if (progressBar) {
                progressBar.style.width = percent + '%';
            }
            if (loaderText) {
                loaderText.innerHTML = `Загрузка ${percent}%<span class="loader-dots"></span>`;
            }
        }
        
        // Начинаем с небольшого прогресса
        updateProgress(10);
        
        criticalImages.forEach((src, index) => {
            const img = new Image();
            img.onload = () => {
                imagesLoaded++;
                const percent = Math.min(10 + Math.round((imagesLoaded / totalImages) * 60), 70);
                updateProgress(percent);
            };
            img.onerror = () => {
                imagesLoaded++;
                const percent = Math.min(10 + Math.round((imagesLoaded / totalImages) * 60), 70);
                updateProgress(percent);
            };
            img.src = src;
        });
        
        // Симуляция прогресса, если загрузка идет медленно
        let progressInterval = setInterval(() => {
            if (progressBar) {
                const currentWidth = parseInt(progressBar.style.width) || 10;
                if (currentWidth < 90) {
                    updateProgress(Math.min(currentWidth + 5, 90));
                }
            }
        }, 200);
        
        // Останавливаем симуляцию при полной загрузке
        window.addEventListener('load', () => {
            clearInterval(progressInterval);
            if (progressBar) {
                updateProgress(100);
            }
        });
        
        // Инициализация Telegram Web App (только если доступен)
        let tg = null;
        if (window.Telegram && window.Telegram.WebApp) {
            tg = window.Telegram.WebApp;
            tg.expand();
            tg.setHeaderColor('#2d5016');
            tg.setBackgroundColor('#f5f5f5');
            // Принудительное обновление кеша
            tg.ready();
            
            // Автоматическая авторизация через Telegram
            const user = tg.initDataUnsafe?.user;
            const userProfile = document.getElementById('userProfile');
            const userName = document.getElementById('userName');
            const userAvatar = document.getElementById('userAvatar');
            
            if (user) {
                // Показываем профиль пользователя
                userProfile.style.display = 'flex';
                
                // Устанавливаем имя
                const fullName = [user.first_name, user.last_name].filter(Boolean).join(' ') || user.first_name || 'Пользователь';
                userName.textContent = fullName;
                
                // Устанавливаем аватар
                if (user.photo_url) {
                    userAvatar.innerHTML = `<img src="${user.photo_url}" alt="${fullName}">`;
                } else {
                    // Если нет фото, показываем первую букву имени
                    const firstLetter = user.first_name ? user.first_name.charAt(0).toUpperCase() : '👤';
                    userAvatar.textContent = firstLetter;
                }
                
                // Сохраняем данные пользователя для использования
                window.userData = {
                    id: user.id,
                    firstName: user.first_name,
                    lastName: user.last_name,
                    username: user.username,
                    languageCode: user.language_code,
                    photoUrl: user.photo_url
                };
                
                console.log('Пользователь авторизован:', window.userData);
            } else {
                // Если открыто не из Telegram, скрываем профиль
                userProfile.style.display = 'none';
                console.log('Открыто не из Telegram, авторизация недоступна');
            }
            
            // Кнопка "Назад"
            tg.BackButton.show();
            tg.BackButton.onClick(() => {
                tg.close();
            });
        } else {
            // Если открыто не из Telegram, скрываем профиль
            const userProfile = document.getElementById('userProfile');
            if (userProfile) {
                userProfile.style.display = 'none';
            }
            console.log('Открыто не из Telegram, Web App SDK недоступен');
        }
        
        // Переключение изображений шапки (работает в любом режиме)
        const headerImages = ['images/head1.jpg', 'images/head2.jpg', 'images/head3.jpg', 'images/head4.jpg'];
        let currentHeaderImageIndex = 0;
        const headerElement = document.querySelector('.header');
        const headerImageToggle = document.getElementById('headerImageToggle');
        
        if (headerImageToggle && headerElement) {
            headerImageToggle.addEventListener('click', function() {
                currentHeaderImageIndex = (currentHeaderImageIndex + 1) % headerImages.length;
                const nextImage = headerImages[currentHeaderImageIndex];
                headerElement.style.backgroundImage = `url('${nextImage}')`;
            });
        }
        
        
        // Функция для генерации HTML состава
        function generateIngredientsHTML(ingredients) {
            if (!ingredients || ingredients.length === 0) {
                return '<div class="plan-card-ingredients-title">Состав</div><div class="plan-card-ingredients-content"><ul class="plan-card-ingredients-list"><li>Состав блюда</li></ul></div>';
            }
            
            let html = '<div class="plan-card-ingredients-title">Состав</div>';
            html += '<div class="plan-card-ingredients-content">';
            
            ingredients.forEach(section => {
                if (section.title) {
                    html += `<div class="plan-card-ingredients-section"><div class="plan-card-ingredients-section-title">${section.title}:</div>`;
                }
                html += '<ul class="plan-card-ingredients-list">';
                section.items.forEach(item => {
                    html += `<li>${item}</li>`;
                });
                html += '</ul>';
                if (section.title) {
                    html += '</div>';
                }
            });
            
            html += '</div>';
            return html;
        }
        
        // Данные продуктов для каждого дня недели
        const dayProducts = [
            // Пн 12.01
            [
                { 
                    meal: 'Завтрак', 
                    image: 'pit1.png', 
                    name: 'Шакшука с моцареллой', 
                    calories: '', 
                    description: 'Шакшука с моцареллой - ароматное и сытное блюдо для начала дня. Свежие овощи, яйца и нежная моцарелла создают идеальный баланс вкуса и пользы.',
                    ingredients: [
                        {
                            title: 'Дополнительно',
                            items: [
                                'Хлебцы с творожным сыром',
                                'или',
                                'Хлеб (цель.зер) с твор. сыром'
                            ]
                        },
                        {
                            title: 'Состав',
                            items: [
                                'Яйцо',
                                'Томаты (или тертые)',
                                'Болгарский перец',
                                'Луковица',
                                'Зубчик чеснока',
                                'Моцарелла',
                                'Зелень, Соль, Паприка'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Первый перекус', 
                    image: 'perekus1.jpg', 
                    name: 'Апельсин', 
                    calories: '', 
                    description: 'Питательный перекус для поддержания энергии между основными приемами пищи.',
                    ingredients: [],
                    alternateImage: 'perekus2.jpg',
                    alternateName: 'Йогурт греческий',
                    alternateMeal: 'Второй перекус'
                },
                { 
                    meal: 'Обед', 
                    image: 'pit2.png', 
                    name: 'Курица с брокколи под сыром', 
                    calories: '',
                    description: 'Курица с брокколи под сыром - сытное и полезное блюдо с высоким содержанием белка. Нежная курица, хрустящая брокколи и ароматный сыр создают идеальную комбинацию вкусов.',
                    ingredients: [
                        {
                            items: [
                                'Булгур',
                                'Куриное филе',
                                'Брокколи',
                                'Сливки низкой жирности',
                                'Сыр',
                                'Соль, Специи и приправы'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Ужин', 
                    image: 'pit3.png', 
                    name: 'Креветки с овощным пюре', 
                    calories: '', 
                    description: 'Креветки с овощным пюре - легкое и питательное блюдо для ужина. Нежные креветки с нежным пюре из цветной капусты создают идеальный баланс белка и овощей.',
                    ingredients: [
                        {
                            items: [
                                'Очищенные креветки',
                                'Замороженная цветная капуста',
                                'Чеснок, Сливочное масло',
                                'Специя карри'
                            ]
                        }
                    ]
                }
            ],
            // Вт 13.01
            [
                { 
                    meal: 'Завтрак', 
                    image: 'pit4.png', 
                    name: 'Овсяноблин с йогуртом', 
                    calories: '', 
                    description: 'Овсяноблин с йогуртом - полезное и вкусное начало дня. Нежная овсянка с йогуртом и начинкой из ягод и творога.',
                    ingredients: [
                        {
                            items: [
                                'Овсянка',
                                'Йогурт (2-5%)',
                                'Какао',
                                'Яйцо',
                                'Сахарозаменитель, ванилин'
                            ]
                        },
                        {
                            title: 'Начинка',
                            items: [
                                'Замороженная или свежая ягода',
                                'Мягкий творог',
                                'Сахарозаменитель'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Первый перекус', 
                    image: '2perekus1.png', 
                    name: 'Миндаль', 
                    calories: '', 
                    description: 'Питательный перекус для поддержания энергии между основными приемами пищи.',
                    ingredients: [],
                    alternateImage: '2perekus2.png',
                    alternateName: '2 Яйца + Огурец',
                    alternateMeal: 'Второй перекус'
                },
                { 
                    meal: 'Обед', 
                    image: 'pit5.png', 
                    name: 'Тефтели из говядины с булгуром', 
                    calories: '',
                    description: 'Тефтели из говядины с булгуром - сытное и ароматное блюдо с нежными мясными тефтелями и питательным булгуром.',
                    ingredients: [
                        {
                            items: [
                                'Говяжий фарш',
                                'Лук, Морковь',
                                'Яйца куриные',
                                'Булгур',
                                'Чеснок, Лавровый лист',
                                'Томатная паста, Хмели-сунели',
                                'Молотый черный перец',
                                'Зелень, Соль'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Ужин', 
                    image: 'pit6.png', 
                    name: 'Теплый салат с куриной печенью', 
                    calories: '', 
                    description: 'Теплый салат с куриной печенью - сытное и полезное блюдо для ужина. Нежная куриная печень с грибами и свежими овощами создают идеальный баланс вкуса и питательности.',
                    ingredients: [
                        {
                            items: [
                                'Куриная печень',
                                'Шампиньоны',
                                'Чеснок, Луковица',
                                'Сливки',
                                'Горчица',
                                'Томаты черри',
                                'Салатный микс'
                            ]
                        }
                    ]
                }
            ],
            // Ср 14.01
            [
                { 
                    meal: 'Завтрак', 
                    image: 'pit7.jpg', 
                    name: 'Булгур с сыром фета и яйцом пашот', 
                    calories: '', 
                    description: 'Булгур с сыром фета и яйцом пашот - сытный и полезный завтрак с нежным яйцом пашот и ароматным сыром фета.',
                    ingredients: [
                        {
                            items: [
                                'Булгур',
                                'Свежевыжатый лимонный сок',
                                'Помидорки черри разрезанные пополам',
                                'Сыр фета',
                                'Яйцо',
                                'Оливковое масло, Соль',
                                'Мелко порубленный укроп',
                                '2 пера зелёного лука',
                                'Оливки тонко нарезанные'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Первый перекус', 
                    image: '3perekus1.jpg', 
                    name: 'ПП Пирожное', 
                    calories: '', 
                    description: 'ПП Пирожное - полезный и вкусный перекус с творогом, ягодами и какао.',
                    ingredients: [
                        {
                            items: [
                                'Рисовые хлебцы',
                                'Ягоды',
                                'Творог мягкий',
                                'Какао'
                            ]
                        }
                    ],
                    alternateImage: '3perekus2.png',
                    alternateName: 'Сухофрукт чернослив',
                    alternateMeal: 'Второй перекус'
                },
                { 
                    meal: 'Обед', 
                    image: 'pit6.png', 
                    name: 'Теплый салат с куриной печенью <span style="color: #22c55e; font-weight: 600;">+ киноа</span>', 
                    calories: '',
                    description: 'Теплый салат с куриной печенью и киноа - сытное и полезное блюдо. Нежная куриная печень с грибами, свежими овощами и питательной киноа создают идеальный баланс вкуса и питательности.',
                    ingredients: [
                        {
                            items: [
                                'Куриная печень',
                                'Шампиньоны',
                                'Чеснок, Луковица',
                                'Сливки',
                                'Горчица',
                                'Томаты черри',
                                'Салатный микс',
                                'Киноа'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Ужин', 
                    image: 'pit8.jpg', 
                    name: 'Лодочки из кабачков', 
                    calories: '', 
                    description: 'Лодочки из кабачков - сытное и полезное блюдо для ужина. Нежные кабачки с мясным фаршем и сыром создают идеальный баланс вкуса и питательности.',
                    ingredients: [
                        {
                            items: [
                                'Фарш мясной',
                                'Кабачки',
                                'Сыр твердый',
                                'Помидоры',
                                'Сметана, Соль',
                                'Черный молотый перец',
                                'Масло растительное'
                            ]
                        }
                    ]
                }
            ],
            // Чт 15.01
            [
                { 
                    meal: 'Завтрак', 
                    image: 'zavtrak.jpg', 
                    name: 'Яичница со шпинатом', 
                    calories: '', 
                    description: 'Яичница со шпинатом - полезное и сытное блюдо для начала дня. Нежные яйца с ароматным шпинатом создают идеальный баланс вкуса и пользы.',
                    note: '+2 хлебца',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Шпинат',
                                '3 яйца',
                                '2 хлебца',
                                'Творожный сыр'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Первый перекус', 
                    image: 'perekus1.jpg', 
                    name: '1 груша', 
                    calories: '', 
                    description: 'Питательный перекус для поддержания энергии между основными приемами пищи.',
                    ingredients: [],
                    alternateImage: 'perekus2.png',
                    alternateName: 'Греческий йогурт',
                    alternateMeal: 'Второй перекус'
                },
                { 
                    meal: 'Обед', 
                    image: 'obed.jpg', 
                    name: 'Лодочки из кабачков', 
                    calories: '',
                    description: 'Лодочки из кабачков - сытное и полезное блюдо. Нежные кабачки с мясным фаршем и сыром создают идеальный баланс вкуса и питательности.',
                    note: '+ цельнозерновые макароны',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Филе куриной грудки',
                                'Томат',
                                'Легкий сыр'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Ужин', 
                    image: 'ujin.jpg', 
                    name: 'Филе телапии с овощным салатом', 
                    calories: '', 
                    description: 'Филе телапии с овощным салатом - легкое и полезное блюдо для ужина. Нежное филе рыбы с свежими овощами создают идеальный баланс белка и витаминов.',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Филе телапии',
                                'Овощной салат',
                                'Помидоры',
                                'Огурцы',
                                'Листья Салата'
                            ]
                        }
                    ]
                }
            ],
            // Пт 16.01
            [
                { 
                    meal: 'Завтрак', 
                    image: 'zavtrak.jpg', 
                    name: 'Овсяная каша с какао и ягодой', 
                    calories: '', 
                    description: 'Овсяная каша с какао и ягодой - полезное и вкусное начало дня. Нежная овсянка с ароматным какао и свежими ягодами создают идеальный баланс вкуса и пользы.',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Овсяные хлопья - 1 стакан',
                                'Кокосовое молоко - 1 стакан',
                                'Вода - 1 стакан',
                                'Какао - 2 ст.л.',
                                'Ванильный экстракт - 1 ч.л.',
                                'Ягоды'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Первый перекус', 
                    image: 'perekus1.png', 
                    name: 'Хлебцы с баклажаной икрой', 
                    calories: '', 
                    description: 'Питательный перекус для поддержания энергии между основными приемами пищи.',
                    ingredients: [],
                    alternateImage: '2perekus1.png',
                    alternateName: 'Орешки - Миндаль',
                    alternateMeal: 'Второй перекус'
                },
                { 
                    meal: 'Обед', 
                    image: 'obed1.png', 
                    name: 'Филе телапии и бурый рис', 
                    calories: '',
                    description: 'Филе телапии и бурый рис - сытное и полезное блюдо. Нежное филе рыбы с питательным бурым рисом создают идеальный баланс белка и углеводов.',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Помидоры',
                                'Огурцы',
                                'Листья салата',
                                'Филе телапии'
                            ]
                        }
                    ],
                    alternateImage: 'obed2.jpg',
                    alternateName: 'Овощной салат',
                    alternateMeal: 'Обед'
                },
                { 
                    meal: 'Ужин', 
                    image: 'ujin.png', 
                    name: 'Филе бедра с овощным салатом', 
                    calories: '', 
                    description: 'Филе бедра с овощным салатом - сытное и полезное блюдо для ужина. Нежное филе курицы с свежими овощами создают идеальный баланс белка и витаминов.',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Огурцы',
                                'Помидоры',
                                'Листья салата'
                            ]
                        }
                    ]
                }
            ],
            // Сб 17.01
            [
                { 
                    meal: 'Завтрак', 
                    image: 'zavtrak.jpg', 
                    name: 'ПП Твистер', 
                    calories: '', 
                    description: 'ПП Твистер - вкусное и полезное блюдо для начала дня. Нежная куриная грудка с овощами в тонком лаваше создают идеальный баланс вкуса и пользы.',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Куриная грудка',
                                'Тонкий лаваш',
                                'Помидоры',
                                'Листья салата',
                                'Сыр легкий',
                                'Натуральный йогурт (Соус)'
                            ]
                        }
                    ]
                },
                { 
                    meal: 'Первый перекус', 
                    image: 'perekus1.png', 
                    name: 'Яблоко', 
                    calories: '', 
                    description: 'Питательный перекус для поддержания энергии между основными приемами пищи.',
                    ingredients: [],
                    alternateImage: 'perekus2.png',
                    alternateName: 'Орешки Кешью 30гр',
                    alternateMeal: 'Второй перекус'
                },
                { 
                    meal: 'Обед', 
                    image: 'obed.png', 
                    name: 'Макароны по флотски', 
                    calories: '',
                    description: 'Макароны по флотски - сытное и ароматное блюдо. Цельнозерновые макароны с куриным фаршем и овощами создают идеальный баланс вкуса и питательности.',
                    ingredients: [
                        {
                            title: 'Состав (Макароны по флотски)',
                            items: [
                                'Цельнозерновые макароны',
                                'Фарш куриный',
                                'Чеснок, Лук',
                                'Томатная паста',
                                'Помидоры',
                                'Зелень'
                            ]
                        },
                        {
                            title: 'Состав (Овощной салат)',
                            items: [
                                'Огурцы',
                                'Помидоры',
                                'Листья салата'
                            ]
                        }
                    ],
                    alternateImage: 'obed2.jpg',
                    alternateName: 'Овощной салат',
                    alternateMeal: 'Обед'
                },
                { 
                    meal: 'Ужин', 
                    image: 'ujin.png', 
                    name: 'Морской салат', 
                    calories: '', 
                    description: 'Морской салат - легкое и полезное блюдо для ужина. Ассорти из морепродуктов с авокадо и свежими овощами создают идеальный баланс белка и витаминов.',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Ассорти из морепродуктов',
                                'Авокадо',
                                'Помидор',
                                'Листья салата',
                                'Руккола',
                                'Лимонный сок',
                                'Оливковое масло',
                                'Бальзамический уксус'
                            ]
                        }
                    ]
                }
            ],
            // Вс 18.01
            [
                { 
                    meal: 'Завтрак', 
                    image: 'zavtrak1.png', 
                    name: 'Вареное яйцо', 
                    calories: '', 
                    description: 'Вареное яйцо - полезное и сытное блюдо для начала дня. Нежное яйцо с хлебцами и творожным сыром создают идеальный баланс белка и питательности.',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Яйцо вареное',
                                'Сёмга молосольное',
                                'Хлебцы 2шт',
                                'Творожный сыр'
                            ]
                        }
                    ],
                    alternateImage: 'zavtrak2.png',
                    alternateName: 'Хлебцы с твор.сыром и сёмгой',
                    alternateMeal: 'Завтрак'
                },
                { 
                    meal: 'Первый перекус', 
                    image: 'perekus1.jpg', 
                    name: 'Фрукт - Груша', 
                    calories: '', 
                    description: 'Питательный перекус для поддержания энергии между основными приемами пищи.',
                    ingredients: [],
                    alternateImage: 'perekus.jpg',
                    alternateName: 'Грецкий орех 20гр',
                    alternateMeal: 'Второй перекус'
                },
                { 
                    meal: 'Обед', 
                    image: 'obed.png', 
                    name: 'Макароны по флотски', 
                    calories: '',
                    description: 'Макароны по флотски - сытное и ароматное блюдо. Цельнозерновые макароны с куриным фаршем и овощами создают идеальный баланс вкуса и питательности.',
                    ingredients: [
                        {
                            title: 'Состав',
                            items: [
                                'Цельнозерновые макароны',
                                'Фарш куриный',
                                'Чеснок, Лук',
                                'Томатная паста',
                                'Помидоры',
                                'Зелень'
                            ]
                        }
                    ],
                    alternateImage: 'ujin.png',
                    alternateName: 'Морской салат',
                    alternateMeal: 'Обед'
                },
                { 
                    meal: 'Ужин', 
                    image: 'ujin.jpg', 
                    name: 'Морской салат', 
                    calories: '', 
                    description: 'Морской салат - легкое и полезное блюдо для ужина. Ассорти из морепродуктов с авокадо и свежими овощами создают идеальный баланс белка и витаминов.',
                    ingredients: [
                        {
                            title: 'Состав (Морской салат)',
                            items: [
                                'Ассорти из морепродуктов',
                                'Авокадо',
                                'Помидор',
                                'Листья салата',
                                'Руккола',
                                'Лимонный сок',
                                'Оливковое масло',
                                'Бальзамический уксус'
                            ]
                        },
                        {
                            title: 'Состав (Овощной салат)',
                            items: [
                                'Огурцы',
                                'Помидоры',
                                'Листья салата'
                            ]
                        }
                    ],
                    alternateImage: 'obed2.jpg',
                    alternateName: 'Овощной салат',
                    alternateMeal: 'Ужин'
                }
            ]
        ];
        
        // Обработка кликов на дни недели
        const planDays = document.querySelectorAll('.plan-day');
        const planCards = document.getElementById('planCards');
        const animatedObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.2, rootMargin: '0px 0px -10% 0px' });
        
        function observeAnimatedElements(scope = document) {
            scope.querySelectorAll('[data-animate]').forEach(el => {
                if (!el.classList.contains('visible')) {
                    animatedObserver.observe(el);
                }
            });
        }
        
        observeAnimatedElements();
        
        
        function updateProducts(dayIndex) {
            const products = dayProducts[dayIndex];
            planCards.innerHTML = '';
            const dayFolder = `Day${dayIndex + 1}`;
            
            products.forEach((product, index) => {
                const card = document.createElement('div');
                card.setAttribute('data-animate', '');
                card.setAttribute('data-meal', product.meal);
                card.setAttribute('data-name', product.name);
                card.setAttribute('data-calories', product.calories);
                card.setAttribute('data-image', `images/${dayFolder}/${product.image}`);
                card.setAttribute('data-description', product.description || `${product.name} - вкусное и полезное блюдо.`);
                card.setAttribute('data-ingredients', JSON.stringify(product.ingredients || []));
                
                const ingredientsHTML = generateIngredientsHTML(product.ingredients);
                const isPerekus = product.meal.toLowerCase().includes('перекус');
                const isUzhin = product.meal.toLowerCase().includes('ужин');
                const isZavtrak = product.meal.toLowerCase().includes('завтрак');
                const isObed = product.meal.toLowerCase().includes('обед');
                const isSoon = product.name === 'Блюдо на фотосессии' || !product.ingredients || product.ingredients.length === 0;
                
                // Убираем HTML теги из названия для alt атрибута
                const nameForAlt = product.name.replace(/<[^>]*>/g, '').replace(/&nbsp;/g, ' ');
                
                // Добавляем классы для стилизации
                let cardClasses = 'plan-card';
                if (isZavtrak) cardClasses += ' meal-zavtrak';
                if (isPerekus) cardClasses += ' meal-perekus';
                if (isObed) cardClasses += ' meal-obed';
                if (isUzhin) cardClasses += ' meal-uzhin';
                
                card.className = cardClasses;
                
                card.innerHTML = `
                    <div class="plan-card-image-wrapper">
                        <img src="images/${dayFolder}/${product.image}" alt="${nameForAlt}" loading="lazy" class="card-image">
                        ${product.note ? `<div class="card-note">${product.note}</div>` : ''}
                    </div>
                    <div class="plan-card-content">
                        <small class="card-meal">${product.meal}</small>
                        <h4 class="card-name">${product.name}</h4>
                        <span>${product.calories}</span>
                        ${(isPerekus || isSoon) ? '' : `<div class="plan-card-ingredients">${ingredientsHTML}</div>`}
                    </div>
                `;
                card.style.transitionDelay = `${index * 0.05}s`;
                planCards.appendChild(card);
                
                // Если есть альтернативное изображение и название, добавляем переключение
                if (product.alternateImage && product.alternateName) {
                    const cardImage = card.querySelector('.card-image');
                    const cardName = card.querySelector('.card-name');
                    const cardMeal = card.querySelector('.card-meal');
                    let isAlternate = false;
                    
                    setInterval(() => {
                        isAlternate = !isAlternate;
                        if (isAlternate) {
                            cardImage.style.opacity = '0';
                            cardName.style.opacity = '0';
                            if (cardMeal) cardMeal.style.opacity = '0';
                            setTimeout(() => {
                                cardImage.src = `images/${dayFolder}/${product.alternateImage}`;
                                cardImage.alt = product.alternateName;
                                cardName.textContent = product.alternateName;
                                if (cardMeal && product.alternateMeal) {
                                    cardMeal.textContent = product.alternateMeal;
                                }
                                cardImage.style.opacity = '1';
                                cardName.style.opacity = '1';
                                if (cardMeal) cardMeal.style.opacity = '1';
                            }, 300);
                        } else {
                            cardImage.style.opacity = '0';
                            cardName.style.opacity = '0';
                            if (cardMeal) cardMeal.style.opacity = '0';
                            setTimeout(() => {
                                cardImage.src = `images/${dayFolder}/${product.image}`;
                                cardImage.alt = product.name;
                                cardName.textContent = product.name;
                                if (cardMeal) {
                                    cardMeal.textContent = product.meal;
                                }
                                cardImage.style.opacity = '1';
                                cardName.style.opacity = '1';
                                if (cardMeal) cardMeal.style.opacity = '1';
                            }, 300);
                        }
                    }, 2000);
                }
                
                // После загрузки изображения синхронизируем высоту
                const img = card.querySelector('img');
                if (img) {
                    if (img.complete) {
                        setTimeout(syncCardHeights, 100);
                    } else {
                        img.addEventListener('load', () => {
                            setTimeout(syncCardHeights, 100);
                        });
                    }
                }
            });

            observeAnimatedElements(planCards);
            attachCardClickHandlers();
            attachIngredientsClickHandlers();
            
            // Синхронизируем высоту карточек в одной строке
            syncCardHeights();
        }
        
        // Функция для синхронизации высоты карточек в одной строке
        function syncCardHeights() {
            const cards = document.querySelectorAll('.plan-card');
            if (cards.length < 2) return;
            
            // Сбрасываем все установленные высоты
            cards.forEach(card => {
                card.style.minHeight = '';
                const content = card.querySelector('.plan-card-content');
                if (content) content.style.marginTop = '';
            });
            
            // Группируем карточки по строкам (каждые 2 карточки)
            for (let i = 0; i < cards.length; i += 2) {
                const row = [cards[i], cards[i + 1]].filter(Boolean);
                if (row.length === 2) {
                    // Находим максимальную высоту изображения в строке
                    const imageHeights = row.map(card => {
                        const imageWrapper = card.querySelector('.plan-card-image-wrapper');
                        return imageWrapper ? imageWrapper.offsetHeight : 0;
                    });
                    const maxImageHeight = Math.max(...imageHeights);
                    
                    // Синхронизируем высоту области с текстом
                    const contentHeights = row.map(card => {
                        const content = card.querySelector('.plan-card-content');
                        return content ? content.offsetHeight : 0;
                    });
                    const maxContentHeight = Math.max(...contentHeights);
                    
                    // Устанавливаем одинаковую высоту изображений и выравниваем текст
                    row.forEach(card => {
                        const imageWrapper = card.querySelector('.plan-card-image-wrapper');
                        const content = card.querySelector('.plan-card-content');
                        
                        if (imageWrapper && imageWrapper.offsetHeight < maxImageHeight) {
                            const diff = maxImageHeight - imageWrapper.offsetHeight;
                            if (content) {
                                content.style.marginTop = diff + 'px';
                            }
                        }
                    });
                    
                    // Находим максимальную общую высоту в строке
                    const heights = row.map(card => {
                        const oldMinHeight = card.style.minHeight;
                        card.style.minHeight = '';
                        const height = card.offsetHeight;
                        card.style.minHeight = oldMinHeight;
                        return height;
                    });
                    const maxHeight = Math.max(...heights);
                    // Устанавливаем минимальную высоту для всех карточек в строке
                    row.forEach(card => {
                        card.style.minHeight = maxHeight + 'px';
                    });
                }
            }
        }
        
        // Обработчик клика на "Состав"
        function attachIngredientsClickHandlers() {
            const ingredientsTitles = document.querySelectorAll('.plan-card-ingredients-title');
            ingredientsTitles.forEach(title => {
                title.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation(); // Предотвращаем открытие модального окна
                    const content = this.nextElementSibling;
                    const ingredientsBlock = this.closest('.plan-card-ingredients');
                    if (content && content.classList.contains('plan-card-ingredients-content')) {
                        if (content.classList.contains('expanded')) {
                            // Сворачиваем
                            const currentHeight = content.scrollHeight;
                            content.style.maxHeight = currentHeight + 'px';
                            // Принудительный reflow
                            content.offsetHeight;
                            content.style.maxHeight = '0px';
                            content.classList.remove('expanded');
                            if (ingredientsBlock) {
                                ingredientsBlock.classList.remove('expanded');
                                // Восстанавливаем исходные стили без скролла
                                ingredientsBlock.style.maxHeight = '40px';
                                ingredientsBlock.style.overflowY = 'hidden';
                                // После завершения анимации убеждаемся, что стили применены
                                setTimeout(() => {
                                    if (!content.classList.contains('expanded') && !ingredientsBlock.classList.contains('expanded')) {
                                        ingredientsBlock.style.maxHeight = '40px';
                                        ingredientsBlock.style.overflowY = 'hidden';
                                    }
                                    // Синхронизируем высоту карточек после сворачивания
                                    syncCardHeights();
                                }, 400);
                            }
                        } else {
                            // Разворачиваем - сначала измеряем реальную высоту
                            content.style.maxHeight = 'none';
                            content.style.overflow = 'visible';
                            const height = content.scrollHeight;
                            content.style.maxHeight = '0px';
                            content.style.overflow = 'hidden';
                            // Сбрасываем стили ingredientsBlock для корректного разворачивания
                            if (ingredientsBlock) {
                                ingredientsBlock.style.maxHeight = '';
                                ingredientsBlock.style.overflowY = '';
                            }
                            // Небольшая задержка для начала анимации
                            requestAnimationFrame(() => {
                                requestAnimationFrame(() => {
                                    content.style.maxHeight = height + 'px';
                                    content.classList.add('expanded');
                                    if (ingredientsBlock) {
                                        ingredientsBlock.classList.add('expanded');
                                    }
                                    // После завершения анимации убираем ограничение
                                    setTimeout(() => {
                                        if (content.classList.contains('expanded')) {
                                            content.style.maxHeight = 'none';
                                            content.style.overflow = 'visible';
                                        }
                                        // Синхронизируем высоту карточек после разворачивания
                                        syncCardHeights();
                                    }, 400);
                                });
                            });
                        }
                    }
                });
            });
            
            // Также предотвращаем клик на весь блок состава
            const ingredientsBlocks = document.querySelectorAll('.plan-card-ingredients');
            ingredientsBlocks.forEach(block => {
                block.addEventListener('click', function(e) {
                    e.stopPropagation(); // Предотвращаем открытие модального окна
                });
            });
        }
        
        // Модальное окно
        const modalOverlay = document.getElementById('modalOverlay');
        const modalClose = document.getElementById('modalClose');
        const modalImage = document.getElementById('modalImage');
        const modalMeal = document.getElementById('modalMeal');
        const modalName = document.getElementById('modalName');
        const modalCalories = document.getElementById('modalCalories');
        const modalDescription = document.getElementById('modalDescription');
        const modalIngredients = document.getElementById('modalIngredients');
        
        function generateModalIngredientsHTML(ingredients) {
            if (!ingredients || ingredients.length === 0) {
                return '';
            }
            
            let html = '<div class="modal-ingredients-title">Состав</div>';
            
            ingredients.forEach(section => {
                if (section.title) {
                    html += `<div class="modal-ingredients-section"><div class="modal-ingredients-section-title">${section.title}:</div>`;
                }
                html += '<ul class="modal-ingredients-list">';
                section.items.forEach(item => {
                    html += `<li>${item}</li>`;
                });
                html += '</ul>';
                if (section.title) {
                    html += '</div>';
                }
            });
            
            return html;
        }
        
        function openModal(card) {
            const meal = card.getAttribute('data-meal');
            const name = card.getAttribute('data-name');
            const calories = card.getAttribute('data-calories');
            const image = card.getAttribute('data-image');
            const description = card.getAttribute('data-description');
            const ingredientsData = card.getAttribute('data-ingredients');
            
            modalImage.src = image;
            modalImage.alt = name;
            modalMeal.textContent = meal;
            modalName.textContent = name;
            modalCalories.textContent = calories;
            modalDescription.textContent = description;
            
            // Парсим и отображаем состав
            let ingredients = [];
            if (ingredientsData) {
                try {
                    ingredients = JSON.parse(ingredientsData);
                } catch (e) {
                    console.warn('Ошибка парсинга состава:', e);
                }
            }
            modalIngredients.innerHTML = generateModalIngredientsHTML(ingredients);
            
            modalOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal() {
            modalOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        function attachCardClickHandlers() {
            const cards = document.querySelectorAll('.plan-card');
            cards.forEach(card => {
                card.addEventListener('click', () => {
                    openModal(card);
                });
            });
        }
        
        // Закрытие модального окна
        if (modalClose) {
            modalClose.addEventListener('click', closeModal);
        }
        
        if (modalOverlay) {
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    closeModal();
                }
            });
            
            // Закрытие по Escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modalOverlay.classList.contains('active')) {
                    closeModal();
                }
            });
        }
        
        // Привязываем обработчики к существующим карточкам
        attachCardClickHandlers();
        
        // Инициализируем продукты для первого дня (вторник) при загрузке
        updateProducts(1);
        
        // Предотвращаем автоматическую прокрутку вниз при загрузке страницы
        window.addEventListener('load', () => {
            // Убеждаемся, что страница начинается с верха
            if (window.scrollY > 0 || document.documentElement.scrollTop > 0) {
                window.scrollTo(0, 0);
                document.documentElement.scrollTop = 0;
                document.body.scrollTop = 0;
            }
        }, { once: true });
        
        // Также предотвращаем прокрутку при изменении DOM
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                window.scrollTo(0, 0);
                document.documentElement.scrollTop = 0;
                document.body.scrollTop = 0;
            });
        } else {
            window.scrollTo(0, 0);
            document.documentElement.scrollTop = 0;
            document.body.scrollTop = 0;
        }
        
        // Данные цен для каждого дня
        const dayPrices = [
            { old: '2250₽', new: '1650₽' }, // Пн 12.01
            { old: '1820₽', new: '1300₽' }, // Вт 13.01
            { old: '2150₽', new: '1290₽' }, // Ср 14.01
            null, // Чт 15.01 - нет цены
            null, // Пт 16.01 - нет цены
            null, // Сб 17.01 - нет цены
            null  // Вс 18.01 - нет цены
        ];
        
        // Функция для обновления цен
        function updatePrice(dayIndex) {
            const priceBlock = document.getElementById('planPriceBlock');
            if (!priceBlock) return;
            
            const priceData = dayPrices[dayIndex];
            if (priceData) {
                priceBlock.classList.add('active');
                priceBlock.setAttribute('data-day', dayIndex);
                const oldPrice = priceBlock.querySelector('.plan-price-old');
                const newPrice = priceBlock.querySelector('.plan-price-new');
                if (oldPrice) oldPrice.textContent = priceData.old;
                if (newPrice) newPrice.textContent = priceData.new;
            } else {
                priceBlock.classList.remove('active');
            }
        }
        
        // Используем делегирование событий для более надежной обработки кликов
        const planDaysContainer = document.querySelector('.plan-days');
        if (planDaysContainer) {
            planDaysContainer.addEventListener('click', (e) => {
                const dayElement = e.target.closest('.plan-day');
                if (!dayElement) return;
                
                const dayIndex = parseInt(dayElement.getAttribute('data-day'));
                if (isNaN(dayIndex)) return;
                
                // Убираем активный класс со всех дней
                planDays.forEach(d => d.classList.remove('active'));
                // Добавляем активный класс к выбранному дню
                dayElement.classList.add('active');
                // Обновляем продукты
                updateProducts(dayIndex);
                // Обновляем цены
                updatePrice(dayIndex);
            });
        }
        
        // Также оставляем прямые обработчики для совместимости
        planDays.forEach((day, index) => {
            day.addEventListener('click', (e) => {
                e.stopPropagation();
                // Убираем активный класс со всех дней
                planDays.forEach(d => d.classList.remove('active'));
                // Добавляем активный класс к выбранному дню
                day.classList.add('active');
                // Обновляем продукты
                updateProducts(index);
                // Обновляем цены
                updatePrice(index);
            });
        });
        
        // Инициализация цены для первого дня
        updatePrice(1);

        
        // Управление подсказкой для прокрутки вниз
        const scrollHint = document.getElementById('scrollHint');
        
        function checkScrollPosition() {
            if (!scrollHint) return;
            
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight;
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            // Показываем подсказку если можно прокрутить вниз (есть еще контент)
            // Скрываем если близко к концу страницы (осталось меньше 200px)
            const distanceFromBottom = documentHeight - (scrollTop + windowHeight);
            
            if (distanceFromBottom > 200) {
                scrollHint.classList.add('visible');
            } else {
                scrollHint.classList.remove('visible');
            }
        }
        
        // Проверяем при прокрутке
        let scrollTimeout;
        window.addEventListener('scroll', () => {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(checkScrollPosition, 100);
        }, { passive: true });
        
        // Управление скрытием/показом header при прокрутке
        const header = document.querySelector('.header');
        let lastScrollTop = 0;
        let scrollTimeoutHeader = null;
        const scrollThreshold = 50; // Порог прокрутки в пикселях
        
        function handleHeaderScroll() {
            if (!header) return;
            
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            // Если прокрутили вниз больше порога - скрываем header
            if (scrollTop > lastScrollTop && scrollTop > scrollThreshold) {
                header.classList.add('hidden');
            } 
            // Если прокрутили до самого верха (scrollTop = 0 или очень близко) - показываем header
            else if (scrollTop <= 10) {
                header.classList.remove('hidden');
            }
            
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
        }
        
        window.addEventListener('scroll', () => {
            clearTimeout(scrollTimeoutHeader);
            scrollTimeoutHeader = setTimeout(handleHeaderScroll, 10);
        }, { passive: true });
        
        // Проверяем при загрузке и изменении размера окна
        window.addEventListener('load', checkScrollPosition);
        window.addEventListener('resize', () => {
            checkScrollPosition();
            syncCardHeights();
        });
        
        // Первоначальная проверка
        setTimeout(checkScrollPosition, 500);
        
        // FAQ функционал
        function toggleFaq(questionElement) {
            const answer = questionElement.nextElementSibling;
            const isActive = questionElement.classList.contains('active');
            
            // Закрываем все другие вопросы в этой категории
            const category = questionElement.closest('.faq-category');
            const allQuestions = category.querySelectorAll('.faq-question');
            const allAnswers = category.querySelectorAll('.faq-answer');
            
            allQuestions.forEach(q => q.classList.remove('active'));
            allAnswers.forEach(a => a.classList.remove('active'));
            
            // Открываем/закрываем текущий вопрос
            if (!isActive) {
                questionElement.classList.add('active');
                answer.classList.add('active');
            }
        }
        
        // Переключение категорий FAQ
        document.querySelectorAll('.faq-category-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const category = this.dataset.category;
                
                // Убираем активный класс со всех кнопок
                document.querySelectorAll('.faq-category-btn').forEach(b => b.classList.remove('active'));
                // Добавляем активный класс к нажатой кнопке
                this.classList.add('active');
                
                // Скрываем все категории
                document.querySelectorAll('.faq-category').forEach(c => c.classList.remove('active'));
                // Показываем выбранную категорию
                document.getElementById(`faq-${category}`).classList.add('active');
            });
        });
        
        // ========== СИСТЕМА УВЕДОМЛЕНИЙ О ПРИЕМЕ ПИЩИ ==========
        
        // Проверка поддержки уведомлений
    </script>
</body>
</html>
